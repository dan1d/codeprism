services:
  - type: web
    name: codeprism
    runtime: docker
    # Minimum: standard plan (2 GB RAM) â€” the local embedding model needs ~1.5 GB.
    # Starter (512 MB) will OOM on first index.
    plan: standard
    envVars:
      - key: CODEPRISM_PORT
        value: 4000
      - key: CODEPRISM_DB_PATH
        value: /data/codeprism.db
      - key: CODEPRISM_DATA_DIR
        value: /data
      - key: CODEPRISM_MULTI_TENANT
        value: false
      - key: CODEPRISM_COMPANY_NAME
        sync: false
      - key: GOOGLE_API_KEY
        sync: false
      - key: CODEPRISM_LLM_PROVIDER
        sync: false
      - key: CODEPRISM_LLM_API_KEY
        sync: false
    disk:
      name: codeprism-data
      mountPath: /data
      sizeGB: 5
